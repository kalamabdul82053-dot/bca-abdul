<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Complaint Management System</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        textarea { width: 300px; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 8px; }
        th { background-color: #f2f2f2; }
        .hidden { display: none; }
        .btn { padding: 5px 10px; margin: 2px; cursor: pointer; }
    </style>
</head>
<body>

    <h2>Complaint Management System</h2>

    <!-- Navigation -->
    <button onclick="showSection('submit')">Submit Complaint</button>
    <button onclick="showSection('admin')">Admin Panel</button>

    <hr>

    <!-- Submit Complaint Section -->
    <div id="submit-section">
        <h3>Submit a Complaint</h3>
        <form id="complaintForm">
            <label>Name:</label><br>
            <input type="text" id="username" required><br><br>

            <label>Complaint:</label><br>
            <textarea id="complaintText" rows="4" required></textarea><br><br>

            <button type="submit" class="btn">Submit</button>
        </form>
    </div>

    <!-- Admin Panel Section -->
    <div id="admin-section" class="hidden">
        <h3>Admin Panel - All Complaints</h3>
        <table id="complaintTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>User</th>
                    <th>Complaint</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Complaints will appear here -->
            </tbody>
        </table>
    </div>

    <!-- JavaScript -->
    <script>
        // Initial load
        let complaints = JSON.parse(localStorage.getItem('complaints')) || [];

        function showSection(section) {
            document.getElementById('submit-section').classList.add('hidden');
            document.getElementById('admin-section').classList.add('hidden');

            if (section === 'submit') {
                document.getElementById('submit-section').classList.remove('hidden');
            } else if (section === 'admin') {
                loadComplaints();
                document.getElementById('admin-section').classList.remove('hidden');
            }
        }

        // Handle complaint submission
        document.getElementById('complaintForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value.trim();
            const complaint = document.getElementById('complaintText').value.trim();

            if (username && complaint) {
                const newComplaint = {
                    id: Date.now(),
                    user: username,
                    text: complaint,
                    status: 'Pending'
                };
                complaints.push(newComplaint);
                localStorage.setItem('complaints', JSON.stringify(complaints));
                alert('Complaint submitted!');
                this.reset();
            }
        });

        // Load complaints into the table
        function loadComplaints() {
            const tbody = document.getElementById('complaintTable').querySelector('tbody');
            tbody.innerHTML = ''; // Clear previous rows

            complaints.forEach((c, index) => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${c.user}</td>
                    <td>${c.text}</td>
                    <td>${c.status}</td>
                    <td>
                        <button class="btn" onclick="updateStatus(${c.id}, 'In Progress')">In Progress</button>
                        <button class="btn" onclick="updateStatus(${c.id}, 'Resolved')">Resolved</button>
                    </td>
                `;

                tbody.appendChild(row);
            });
        }

        // Update status of a complaint
        function updateStatus(id, newStatus) {
            const index = complaints.findIndex(c => c.id === id);
            if (index !== -1) {
                complaints[index].status = newStatus;
                localStorage.setItem('complaints', JSON.stringify(complaints));
                loadComplaints();
            }
        }

        // Default section
        showSection('submit');
    </script>
</body>
</html>

